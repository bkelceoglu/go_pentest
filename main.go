package main

import (
	"fmt"
	"net"
	window "netwrk/window"

	"github.com/marcusolsson/tui-go"
)

var deviceName string

func findNets() {
	result, err := net.Interfaces()
	if err != nil {
		// libs.PrintError(errors.New(err.Error() + " can not find any device"))
		return
	}
	window.History.Append(tui.NewLabel("commands start with \\ ex: \\help"))
	window.AllDevices = make(map[string]string)
	for _, i := range result {
		addrs, _ := i.Addrs()
		macaddrs := i.HardwareAddr
		a := fmt.Sprintf(" ADDRESS: %s", addrs)
		b := fmt.Sprintf(" MAC: %s", macaddrs)
		message := tui.NewHBox(
			tui.NewLabel("DEVICE : " + i.Name + a + b),
		)
		window.History.Append(tui.NewHBox(
			message,
			tui.NewSpacer(),
		))
		if len(addrs) != 0 {
			window.AllDevices[i.Name] = addrs[0].String() + "," + macaddrs.String()
		} else {
			window.AllDevices[i.Name] = "N/A" + "," + macaddrs.String()
		}
		window.Input.SetText("device:")
	}
	window.History.Append(tui.NewLabel("PLEASE ENTER YOUR WORK DEVICE"))

}

func main() {

	findNets()
	window.CreateMainWindow()

	/*
		findNets()
		getDevice()
		// libs.StartMonitoring(deviceName)
		commands.StartCommandInterface()
	*/
}
